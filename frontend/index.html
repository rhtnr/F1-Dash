<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>F1-Dash - Formula 1 Race Analysis Dashboard</title>
    <meta name="title" content="F1-Dash - Formula 1 Race Analysis Dashboard">
    <meta name="description" content="Analyze Formula 1 race data with interactive charts. Compare lap times, tire strategies, telemetry, race pace, and ML-powered predictions. Powered by FastF1.">
    <meta name="keywords" content="Formula 1, F1, race analysis, lap times, telemetry, tire strategy, race predictions, FastF1, motorsport data, F1 statistics">
    <meta name="author" content="F1-Dash">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://f1-dash.onrender.com/">
    <meta property="og:title" content="F1-Dash - Formula 1 Race Analysis Dashboard">
    <meta property="og:description" content="Analyze Formula 1 race data with interactive charts. Compare lap times, tire strategies, telemetry, and ML-powered predictions.">
    <meta property="og:image" content="https://f1-dash.onrender.com/assets/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://f1-dash.onrender.com/">
    <meta property="twitter:title" content="F1-Dash - Formula 1 Race Analysis Dashboard">
    <meta property="twitter:description" content="Analyze Formula 1 race data with interactive charts. Compare lap times, tire strategies, telemetry, and ML-powered predictions.">
    <meta property="twitter:image" content="https://f1-dash.onrender.com/assets/og-image.png">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://f1-dash.onrender.com/">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèéÔ∏è</text></svg>">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/charts.css">

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "F1-Dash",
        "description": "Formula 1 Race Analysis Dashboard with lap times, telemetry, strategy analysis, and ML predictions",
        "applicationCategory": "Sports Analytics",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</head>
<body>
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title"><span class="title-f1">F1</span><span class="title-dash">-Dash</span></h1>
            <nav class="nav-links">
                <a href="#lap-times" class="nav-link active" data-section="lap-times">Lap Times</a>
                <a href="#strategy" class="nav-link" data-section="strategy">Strategy</a>
                <a href="#telemetry" class="nav-link" data-section="telemetry">Telemetry</a>
                <a href="#race-pace" class="nav-link" data-section="race-pace">Race Pace</a>
                <a href="#predictions" class="nav-link" data-section="predictions">Predictions</a>
            </nav>
        </div>
    </header>

    <main class="app-main">
        <!-- Session Selector -->
        <section class="controls-section">
            <div class="session-selector">
                <div class="select-group">
                    <label for="year-select">Year</label>
                    <select id="year-select" class="select-input">
                        <option value="">Select Year</option>
                    </select>
                </div>
                <div class="select-group">
                    <label for="event-select">Event</label>
                    <select id="event-select" class="select-input" disabled>
                        <option value="">Select Event</option>
                    </select>
                </div>
                <div class="select-group">
                    <label for="session-select">Session</label>
                    <select id="session-select" class="select-input" disabled>
                        <option value="">Select Session</option>
                    </select>
                </div>
                <button id="load-btn" class="btn btn-primary" disabled>Load Data</button>
            </div>
        </section>

        <!-- Lap Times Section -->
        <section id="lap-times" class="chart-section active">
            <div class="section-header">
                <h2>Lap Time Analysis</h2>
                <div class="chart-controls">
                    <div class="driver-filter">
                        <label>Drivers:</label>
                        <div id="driver-checkboxes" class="checkbox-group"></div>
                    </div>
                    <div class="toggle-group">
                        <label>
                            <input type="checkbox" id="valid-only" checked>
                            Valid laps only
                        </label>
                    </div>
                    <div class="toggle-group">
                        <label>
                            <input type="checkbox" id="hide-outliers" checked>
                            Hide outliers
                        </label>
                    </div>
                    <button id="compare-fastest-btn" class="btn btn-secondary" disabled>Compare Fastest Laps</button>
                </div>
            </div>
            <div class="chart-container">
                <div id="lap-times-chart" class="chart"></div>
            </div>
            <div class="chart-container">
                <h3>Lap Times Table</h3>
                <div id="lap-times-table" class="table-container"></div>
            </div>
        </section>

        <!-- Strategy Section -->
        <section id="strategy" class="chart-section">
            <div class="section-header">
                <h2>Tire Strategy</h2>
            </div>
            <div class="chart-container">
                <div id="strategy-chart" class="chart"></div>
            </div>
            <div class="chart-container">
                <h3>Compound Performance</h3>
                <div id="compound-chart" class="chart"></div>
            </div>
        </section>

        <!-- Telemetry Section -->
        <section id="telemetry" class="chart-section">
            <div class="section-header">
                <h2>Telemetry Comparison</h2>
                <div class="chart-controls">
                    <div class="select-group">
                        <label for="telemetry-driver1">Driver 1</label>
                        <select id="telemetry-driver1" class="select-input">
                            <option value="">Select Driver</option>
                        </select>
                    </div>
                    <div class="select-group">
                        <label for="telemetry-lap1">Lap</label>
                        <select id="telemetry-lap1" class="select-input">
                            <option value="">Fastest</option>
                        </select>
                    </div>
                    <div class="select-group">
                        <label for="telemetry-driver2">Driver 2</label>
                        <select id="telemetry-driver2" class="select-input">
                            <option value="">Select Driver</option>
                        </select>
                    </div>
                    <div class="select-group">
                        <label for="telemetry-lap2">Lap</label>
                        <select id="telemetry-lap2" class="select-input">
                            <option value="">Fastest</option>
                        </select>
                    </div>
                    <button id="compare-telemetry-btn" class="btn btn-secondary">Compare</button>
                </div>
            </div>
            <div class="telemetry-grid">
                <div class="chart-container telemetry-main">
                    <h3>Multi-Channel Telemetry</h3>
                    <div id="multi-telemetry-chart" class="chart chart-tall"></div>
                </div>
                <div class="chart-container telemetry-side">
                    <h3>Track Map</h3>
                    <div id="track-map-chart" class="chart chart-square"></div>
                </div>
            </div>
            <div class="chart-container">
                <h3>Speed Trace</h3>
                <div id="speed-trace-chart" class="chart"></div>
            </div>
        </section>

        <!-- Race Pace Section -->
        <section id="race-pace" class="chart-section">
            <div class="section-header">
                <h2>Race Pace Analysis</h2>
            </div>
            <div class="chart-container">
                <h3>Lap Time Distribution by Driver</h3>
                <div id="race-pace-chart" class="chart"></div>
            </div>
            <div class="chart-container">
                <h3>Position Changes</h3>
                <div id="position-chart" class="chart"></div>
            </div>
        </section>

        <!-- Predictions Section -->
        <section id="predictions" class="chart-section">
            <div class="section-header">
                <h2>Race Predictions (ML)</h2>
                <div class="chart-controls">
                    <div class="model-info" id="model-status">
                        <span class="status-indicator"></span>
                        <span class="status-text">Checking model...</span>
                    </div>
                    <div class="toggle-group">
                        <label>
                            <input type="checkbox" id="show-backtest" checked>
                            Show actual results (backtest)
                        </label>
                    </div>
                    <button id="load-prediction-btn" class="btn btn-secondary" disabled>Load Prediction</button>
                </div>
            </div>
            <div class="prediction-info">
                <p>Predictions are based on practice session data (FP1, FP2, FP3) using an XGBoost model trained on historical races.</p>
                <p>Features include: best lap times, average pace, consistency, long run pace, and session positions.</p>
            </div>
            <div class="chart-container">
                <h3>Predicted Finishing Order</h3>
                <div id="prediction-chart" class="chart chart-tall"></div>
            </div>
            <div class="prediction-table-container">
                <h3>Detailed Predictions</h3>
                <div id="prediction-table" class="table-container"></div>
            </div>
        </section>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p>Loading data...</p>
        </div>
    </main>

    <footer class="app-footer">
        <div class="footer-content">
            <div class="footer-left">
                <p>F1-Dash | Data powered by <a href="https://github.com/theOehrly/Fast-F1" target="_blank" rel="noopener">FastF1</a></p>
            </div>
            <div class="footer-right">
                <a href="https://github.com/rhtnr/f1-dash" target="_blank" rel="noopener" class="footer-link" title="View source on GitHub">
                    <svg class="footer-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                    </svg>
                    <span>Source</span>
                </a>
                <a href="https://buymeacoffee.com/rhtnr" target="_blank" rel="noopener" class="footer-link bmc-link" title="Buy me a coffee">
                    <svg class="footer-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364z"/>
                    </svg>
                    <span>Buy me a coffee</span>
                </a>
            </div>
        </div>
    </footer>

    <!-- Configuration (load before app) -->
    <script src="config.js"></script>
    <!-- Application Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
